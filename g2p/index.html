<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="icon" href="https://blog.mothertongues.org/assets/images/logo_no_text.png">

    <title>Getting from 'a' to 'b' with g2p | Mother Tongues Blog</title>

    <!-- Begin Jekyll SEO tag v2.5.0 -->
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Getting from ‘a’ to ‘b’ with g2p" />
<meta name="author" content="AidanPine" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="How to get from ‘a’ to ‘b’ using the g2p library" />
<meta property="og:description" content="How to get from ‘a’ to ‘b’ using the g2p library" />
<link rel="canonical" href="https://blog.mothertongues.org/g2p/" />
<meta property="og:url" content="https://blog.mothertongues.org/g2p/" />
<meta property="og:site_name" content="Mother Tongues Blog" />
<meta property="og:image" content="https://blog.mothertongues.org/assets/images/bonjour-g2p.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-08-07T00:00:00+00:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@AidanPine" />
<meta name="twitter:creator" content="@AidanPine" />
<script type="application/ld+json">
{"dateModified":"2020-08-07T00:00:00+00:00","datePublished":"2020-08-07T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.mothertongues.org/g2p/"},"author":{"@type":"Person","name":"AidanPine"},"description":"How to get from ‘a’ to ‘b’ using the g2p library","image":"https://blog.mothertongues.org/assets/images/bonjour-g2p.png","@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://blog.mothertongues.org/assets/images/logo_no_text.png"},"name":"AidanPine"},"url":"https://blog.mothertongues.org/g2p/","headline":"Getting from ‘a’ to ‘b’ with g2p","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <link href="/assets/css/screen.css" rel="stylesheet">

    <link href="/assets/css/main.css" rel="stylesheet">

    <link href="https://unpkg.com/applause-button/dist/applause-button.css" rel="stylesheet">

    <script src="/assets/js/jquery.min.js"></script>

    <script src="/assets/js/readingtime.min.js"></script>

    <script src="https://unpkg.com/applause-button/dist/applause-button.js"></script>

    <script>
        $(function () {
            $('.article-post').readingTime({
                readingTimeAsNumber: false,
                readingTimeTarget: $('.reading-time'),
                wordsPerMinute: 150,
                prependTimeString: "Read time: ",
                round: true,
                lang: 'en',
                success: function (data) {
                    console.log(data);
                },
                error: function (data) {
                    console.log(data.error);
                    $('.reading-time').remove();
                }
            });
        })
    </script>

</head>


<!-- change your GA id in _config.yml -->
<script>
        (function (i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date(); a = s.createElement(o),
                m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
    ga('create', 'UA-100872710-18', 'auto');
    ga('send', 'pageview');
</script>




<body class="layout-post">
    <!-- defer loading of font and font awesome -->
    <noscript id="deferred-styles">
        <link
            href="https://fonts.googleapis.com/css?family=Amatic+SC%7CRighteous%7CMerriweather:300,300i,400,400i,700,700i"
            rel="stylesheet">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
            integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    </noscript>


    <!-- Begin Menu Navigation
================================================== -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">

        <div class="container pr-0">

            <!-- Begin Logo -->
            <a class="navbar-brand" href="/">
                <img src="/assets/images/logo_no_text.png" alt="Mother Tongues Blog"> Mother Tongues
            </a>
            <!-- End Logo -->

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarMediumish">

                <!-- Begin Menu -->

                <ul class="navbar-nav ml-auto">

                    
                    <li class="nav-item">
                        
                        <a class="nav-link" href="/index.html">Blog</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="https://blog.mothertongues.org/about">About</a>
                    </li>

                    <script src="/assets/js/lunr.js"></script>


<style>
    .lunrsearchresult .title {color: #d9230f;}
    .lunrsearchresult .url {color: silver;}
    .lunrsearchresult a {display: block; color: #777;}
    .lunrsearchresult a:hover, .lunrsearchresult a:focus {text-decoration: none;}
    .lunrsearchresult a:hover .title {text-decoration: underline;}
</style>


<form class="bd-search" onSubmit="return lunr_search(document.getElementById('lunrsearch').value);">
    <input type="text" class="form-control text-small launch-modal-search" id="lunrsearch" name="q" maxlength="255" value="" placeholder="Type and enter..."/>
</form>

<div id="lunrsearchresults">
    <ul></ul>
</div>

<script src="/assets/js/lunrsearchengine.js"></script>

                </ul>

                <!-- End Menu -->

            </div>

        </div>
    </nav>
    <!-- End Navigation
================================================== -->

    <div class="site-content">

        <div class="container">

            <!-- Site Title
================================================== -->
            <div class="mainheading">
                <h1 class="sitetitle">Mother Tongues Blog</h1>
                <p class="lead">
                    Smashing the lore of language technology!
                </p>
            </div>

            <!-- Content
================================================== -->
            <div class="main-content">
                <!-- Begin Article
================================================== -->
<div class="container">
    <div class="row">

        <!-- Post Share -->
        <div class="col-md-2 pl-0">
            <div class="share sticky-top sticky-top-offset">
    <p>
        Share
    </p>
    <ul>
        <li class="ml-1 mr-1">
            <a target="_blank" href="https://twitter.com/intent/tweet?text=Getting from 'a' to 'b' with g2p&url=https://blog.mothertongues.org/g2p/" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                <i class="fab fa-twitter"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://facebook.com/sharer.php?u=https://blog.mothertongues.org/g2p/" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
                <i class="fab fa-facebook-f"></i>
            </a>
        </li>

        <li class="ml-1 mr-1">
            <a target="_blank" href="https://www.linkedin.com/shareArticle?mini=true&url=https://blog.mothertongues.org/g2p/" onclick="window.open(this.href, 'width=550,height=435');return false;">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </li>

    </ul>
    
    <div class="sep">
    </div>
    <ul>
        <li>
        <a class="small smoothscroll" href="#disqus_thread"></a>
        </li>
    </ul>
    
</div>

        </div>

        <!-- Post -->
        

        <div class="col-md-9 flex-first flex-md-unordered">
            <div class="mainheading">

                <!-- Author Box -->
                
                <div class="row post-top-meta">
                    <div class="col-xs-12 col-md-3 col-lg-2 text-center text-md-left mb-4 mb-md-0">
                        
                        <img class="author-thumb"
                            src="https://www.gravatar.com/avatar/7623fd3eeb0acbe1084fecc20c3093ae?s=250&d=mm&r=x"
                            alt="Aidan">
                        
                    </div>
                    <div class="col-xs-12 col-md-9 col-lg-10 text-center text-md-left">
                        <a target="_blank" class="link-dark" href="https://aidanpine.ca">Aidan</a><a
                            target="_blank" href="https://twitter.com/aidanpine" class="btn follow">Follow</a>
                        <span class="author-description">Lead developer of Mother Tongues.</span>
                    </div>
                </div>
                

                <!-- Post Title -->
                <h1 class="posttitle">Getting from 'a' to 'b' with g2p</h1>
                <div class="eta reading-time" style='font-size: small;'>
                </div>
            </div>

            <!-- Adsense if enabled from _config.yml (change your pub id and slot) -->
            
            <!-- End Adsense -->

            <!-- Post Featured Image -->
            

            
            <img class="featured-image img-fluid"
                src="/assets/images/bonjour-g2p.png"
                alt="Getting from 'a' to 'b' with g2p">
            

            
            <!-- End Featured Image -->

            <!-- Post Content -->
            <div class="article-post">
                <!-- Toc if any -->
                
                <!-- End Toc -->
                <p>This blog post describes the background context for a software tool called <code class="highlighter-rouge">g2p</code> which is shorthand for ‘Grapheme-to-Phoneme’, but if you don’t know those terms, don’t worry, this post will explain it. Essentially, <code class="highlighter-rouge">g2p</code> is a tool for systematically converting between two types of text. Common use cases include converting between a <a href="#use-case-1-getting-the-pronunciation-from-a-words-spelling">writing system and the phonetic alphabet</a>, between two <a href="#use-case-2-a-language-with-multiple-writing-systems">writing systems for the same language</a>, or between a legacy <a href="#use-case-3-converting-from-legacy-writing-systems">‘font-hacked’ writing system and its current Unicode-supported version</a>.</p>

<h1 id="what-you-need-to-know-to-understand-this-post">What you need to know to understand this post</h1>

<ul>
  <li>To understand the advanced section, you will need to know some <a href="https://www.python.org/">Python</a></li>
</ul>

<h1 id="who-is-involved-with-this-project">Who is involved with this project?</h1>

<ul>
  <li>Maintainer (i.e. the person to bug with questions): <a href="https://aidanpine.ca">Aidan Pine</a></li>
  <li>Lots of <a href="https://github.com/roedoejet/g2p/graphs/contributors">other contributors</a></li>
</ul>

<h1 id="what-are-the-motivations-behind-g2p">What are the motivations behind G2P?</h1>

<p>There are many reasons why you might want to systematically convert between different characters<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup>. Here are a few possible use cases:</p>

<h3 id="use-case-1-getting-the-pronunciation-from-a-words-spelling">Use Case #1: Getting the pronunciation from a word’s spelling</h3>

<p>Sometimes you want to convert between a language’s writing system (also known as <em>orthography</em>) and its pronunciation. “Letters” in a writing system are usually referred to as “graphemes” and their corresponding meaningful sounds are referred to as “phonemes”; hence “g2p” or “grapheme-to-phoneme”.</p>

<p>It gets a little more complicated than that though, because sometimes a grapheme is made of more than one character, as in “th” which can be pronounced <em><a href="https://www.thoughtco.com/voiced-and-voiceless-consonants-1212092#:~:text=Voiceless%20consonants%20do%20not%20use,as%20in%20%22thing%22">unvoiced</a>.)</em> as in ‘thin’ or <em><a href="https://www.thoughtco.com/voiced-and-voiceless-consonants-1212092#:~:text=Voiced%20Consonants,-Your%20vocal%20cords&amp;text=As%20you%20pronounce%20a%20letter,W%2C%20Y%2C%20and%20Z.">voiced</a></em> as in ‘that’.</p>

<p>The <a href="https://en.wikipedia.org/wiki/International_Phonetic_Alphabet">International Phonetic Alphabet</a> is not so ambiguous, and writes the ‘th’ in ‘thin’ as <strong>θ</strong> and the ‘th’ in ‘that’ as <strong>ð</strong>. Knowing how to convert between the written and spoken form of a language is useful in a variety of computational tasks, but I will describe the usefulness specifically with a project called “ReadAlongs” <a href="#readalongs">below</a>.</p>

<h3 id="use-case-2-a-language-with-multiple-writing-systems">Use Case #2: A language with multiple writing systems</h3>

<p>Some languages have two (or more!) different writing systems. Take Cree for example, where you can either write a word in <em>Standard Roman Orthography</em> like “ê-wêpâpîhkêwêpinamâhk” or in <em>Syllabics</em> like <strong>ᐁᐍᐹᐲᐦᑫᐍᐱᐊᒫᕽ</strong>. My colleague <a href="https://eddieantonio.ca">Eddie</a> has a great blog post about a tool he created to convert between the two <a href="https://blog.mothertongues.org/why-a-new-cree-syllabics-converter">here</a>.</p>

<h3 id="use-case-3-converting-from-legacy-writing-systems">Use Case #3: Converting from legacy writing systems</h3>

<p>Some languages historically used ‘font hacks’ to render the characters in their writing system before they were supported standardly on computers. There’s a longer discussion to be had here, but the coles’ notes version is that when computers were gaining popularity, they weren’t typically able to <em>render</em> (ie display) characters outside of the 128 characters supported by the <a href="https://en.wikipedia.org/wiki/ASCII">American Standard Code for Information Interchange (ASCII)</a>. To get around this, language communities would come up with their own custom fonts (often referred to as ‘font hacks’ or ‘font encodings’) where they would render characters like ‘©’ which existed in ASCII as ‘ǧ’ instead (example taken from the Heiltsuk Doulos font). For more information on this topic, please check out <a href="http://aidanpine.ca/static/cv/pdfs/Pine-Turin-Convertextract-2018.pdf">‘Seeing the Heiltsuk Orthography from Font Encoding through to Unicode’</a> or <a href="https://markturin.sites.olt.ubc.ca/files/2020/06/Schillo_Turin_typeface_2020.pdf">‘Applications and innovations in typeface design for North American Indigenous languages’</a>.</p>

<h1 id="how-to-get-from-a-to-b-or-a-to-æ-with-g2p">How to get from ‘a’ to ‘b’ (or ‘a’ to ‘æ’) with g2p</h1>

<p><code class="highlighter-rouge">g2p</code> is a Python library<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup> that helps you convert between different characters based on user-defined rules. The inspiration for how to write these rules was mostly taken from the notion of <a href="https://en.wikipedia.org/wiki/Phonological_rule">phonological rewrite rules</a>, which is a common way of describing ‘multi-level’ phonological changes in linguistics. What is meant by that is the idea that a word, like ‘cats’ or ‘dogs’ can have multiple ‘levels’ of representation. For example, you might think of the way that those words are written in English orthography (writing system) as one level. Then, you might think of a general pronunciation for those words, written in the phonetic alphabet, as another level. You could also separate that level into more than one level by having a level each for <a href="https://en.wikipedia.org/wiki/Phonetic_transcription#Narrow_versus_broad_transcription:~:text=orthography.-,Narrow%20versus%20broad%20transcription">narrow and broad transcriptions</a>.</p>

<table>
  <thead>
    <tr>
      <th>Level Name</th>
      <th>Word #1</th>
      <th>Word #2</th>
      <th>Word # 3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Level 1 (orthography)</td>
      <td>cat</td>
      <td>dog</td>
      <td>back</td>
    </tr>
    <tr>
      <td>Level 2 (broad IPA)</td>
      <td>kæt</td>
      <td>dɑɡ</td>
      <td>bæk</td>
    </tr>
    <tr>
      <td>Level 3 (narrow IPA)</td>
      <td>kʰæt</td>
      <td>dɑɡ</td>
      <td>bæk</td>
    </tr>
  </tbody>
</table>

<p>Now, just by looking at these three levels, you can probably see some fairly systematic rules here that you could imagine would get you from one level to the next, even if you don’t know the phonetic alphabet by-heart and even if you don’t really know about the English phonology (sound patterns and systems).</p>

<p>First of all, it looks like all of the ‘a’ characters in level one turn to ‘æ’, so we might want a rule to express that all instances of ‘a’ turn to /æ/. And, for another example, it looks like between levels 2 and 3, /k/ turns into either [k] or [kʰ] depending on whether it occurs before or after /æ/<sup id="fnref:3"><a href="#fn:3" class="footnote">3</a></sup>. So, with these hypotheses about the rules to transform from one level to another, how do we start translating this into rules for <code class="highlighter-rouge">g2p</code>?</p>

<h2 id="basic-rule-writing">Basic Rule writing</h2>

<p><code class="highlighter-rouge">g2p</code> lets you describe these patterns using an ordered list of rules. Each rule must be defined to have an sequence of one or more input characters and a sequence of zero or more output characters. We can define these rules in <code class="highlighter-rouge">g2p</code> either using a tabular, spreadsheet format (csv) or using a format called JavaScript Object Notation or <a href="https://www.json.org/json-en.html">JSON</a>. To actually write these rules along with this blog post, I recommend getting some sort of text editor, like <a href="https://code.visualstudio.com/">Visual Studio Code</a>. You could also write the spreadsheet-type rules in your favourite spreadsheet editor.</p>

<table>
  <thead>
    <tr>
      <th>in</th>
      <th>out</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>a</td>
      <td>æ</td>
    </tr>
  </tbody>
</table>

<p>or using <a href="https://www.json.org/json-en.html">JSON</a>:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>Both of the above rules capture our first, rule that turns an orthographic ‘a’ into a broad IPA /æ/. You can choose to write your rules in <strong>either</strong> format, although JSON will offer you slightly more flexibility when writing <a href="#advanced-a-deeper-dive-into-writing-tricky-rules">advanced rules</a>.</p>

<p>If we want to write rules that depend on a particular context, we need a couple more columns (csv) or keys (JSON) than just <code class="highlighter-rouge">in</code> and <code class="highlighter-rouge">out</code>. This is where we use <code class="highlighter-rouge">context_before</code> and <code class="highlighter-rouge">context_after</code>. So, our second rule from above was to turn /k/ to [kʰ] when the character after /k/ is /æ/. Here, we could write the rules like this:</p>

<table>
  <thead>
    <tr>
      <th>in</th>
      <th>out</th>
      <th>context_before</th>
      <th>context_after</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>k</td>
      <td>kʰ</td>
      <td> </td>
      <td>æ</td>
    </tr>
  </tbody>
</table>

<p>or like this using JSON:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"k"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kʰ"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context_after"</span><span class="p">:</span><span class="w"> </span><span class="s2">"æ"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<h2 id="ok-so-how-do-i-actually-get-started-here">Ok, so how do I actually get started here?</h2>

<p>So, you’ve understood the <a href="#basic-rule-writing">basics of writing rules</a> either described above and you want to actually use them to convert something! This section describes exactly how to do that.</p>

<p>The easiest way to write rules quickly is using the <a href="https://g2p-studio.herokuapp.com/">G2P Studio</a> web application<sup id="fnref:4"><a href="#fn:4" class="footnote">4</a></sup>. Once landing on the G2P Studio page, you can scroll down to the <a href="https://g2p-studio.herokuapp.com/#out_delimiter-0:~:text=Custom%20Rules">Custom Rules</a> section and start directly editing the spreadsheet available there. Below is a list of all the rules to capture the transformations between level 1 and level 2 above. There are some rules that we discussed in that section, and some others that might look unfamiliar. For a full description of some of these rules, have a look at the <a href="#a-deeper-dive-into-writing-tricky-rules">advanced rule-writing section</a>.</p>

<p><img src="/assets/images/g/custom-rules-g2p-studio-800-2a352d.png" srcset="/assets/images/g/custom-rules-g2p-studio-400-2a352d.png 400w, /assets/images/g/custom-rules-g2p-studio-600-2a352d.png 600w, /assets/images/g/custom-rules-g2p-studio-800-2a352d.png 800w, /assets/images/g/custom-rules-g2p-studio-968-2a352d.png 968w" /></p>

<p>Then, you can write some text in the left text-area at the top of the G2P Studio, and g2p will apply your rules and produce the output in the right text area as seen below:</p>

<p><img src="/assets/images/g/custom-rules-output-g2p-studio-800-8fbdf4.png" srcset="/assets/images/g/custom-rules-output-g2p-studio-400-8fbdf4.png 400w, /assets/images/g/custom-rules-output-g2p-studio-600-8fbdf4.png 600w, /assets/images/g/custom-rules-output-g2p-studio-800-8fbdf4.png 800w, /assets/images/g/custom-rules-output-g2p-studio-977-8fbdf4.png 977w" /></p>

<p>You can then click on ‘Export’ under the Custom Rules section to export your rules to a CSV file if you want to save them for later.</p>

<h2 id="mapping-configuration">Mapping configuration</h2>

<p>When you combine multiple rules in <code class="highlighter-rouge">g2p</code> for a particular purpose, this is called a <em>mapping</em>. In addition to each file containing your rules, you need a configuration file that tells <code class="highlighter-rouge">g2p</code> how to process your rules. We write mapping configurations in files titled <code class="highlighter-rouge">config.yaml</code>. You will need some sort of text editor, like <a href="https://code.visualstudio.com/">VS Code</a> in order to edit your configuration file.</p>

<p>Here is a basic configuration for your mapping:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span> <span class="c1"># this is a shared value for all the mappings in this configuration</span>
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English to IPA</span> <span class="c1"># this is a 'display name'. It is a user-friendly name for your mapping.</span>
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng</span> <span class="c1"># This is the code for your language input. By convention in g2p this should contain your language's ISO 639-3 code</span>
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> <span class="c1"># This is the code for the output of your mapping. By convention in g2p we suffix -ipa to the in_lang for mappings between an orthography and IPA</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span> 
    <span class="na">authors</span><span class="pi">:</span> <span class="c1"># This is a way to keep track of who has contributed to the mapping</span>
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_to_ipa.json</span> <span class="c1"># This is the path to your mapping file. It should be in the same folder as your config.yaml file</span>
</code></pre></div></div>

<p>If you are familiar with yaml, you will see that you can have more than one mapping under the <code class="highlighter-rouge">mappings</code> key. So to add another mapping to this file, it would look like this:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span> 
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English to IPA</span> 
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng</span> 
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> 
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span> 
    <span class="na">authors</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_to_ipa.json</span> 
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span>
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English IPA to Arpabet</span>
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> 
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-arpabet</span>
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span> 
    <span class="na">authors</span><span class="pi">:</span> 
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_ipa_to_arpabet.json</span> 
</code></pre></div></div>

<h3 id="special-settings">Special settings</h3>

<p>You can add extra settings to your configuration file to change the way that <code class="highlighter-rouge">g2p</code> interprets your mappings. Below is a list of possible settings and their use. All of the settings keys below must be declared for each individual mapping in your <code class="highlighter-rouge">config.yaml</code> and must be declared on the same level as all of the other keys (<code class="highlighter-rouge">language_name</code>, <code class="highlighter-rouge">in_lang</code>, <code class="highlighter-rouge">out_lang</code> etc). These settings can also be set in the <code class="highlighter-rouge">G2P Studio</code> instead of in a <code class="highlighter-rouge">config.yml</code> file.</p>

<h5 id="as_is-default-true"><code class="highlighter-rouge">as_is</code> (default: True)</h5>
<p>As described in the earlier part of this post, your rules apply in the order you write them. And as described in the advanced section on <a href="#rule-ordering">rule ordering</a>, sometimes this can make your mapping produce unexpected results!</p>

<p>If you set your mapping to <code class="highlighter-rouge">as_is: false</code>, <code class="highlighter-rouge">g2p</code> will sort all of your rules based on the length of the input to the rule, so that rules with longer inputs apply before rules with shorter inputs. This prevents some common ‘bleeding’ rule-ordering relationships described in the <a href="#rule-ordering">rule ordering</a> section. So, if you declared your rules as:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"a"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b"</span><span class="w">
    </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
        </span><span class="s2">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ab"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"c"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>Then, with <code class="highlighter-rouge">as_is</code> set to True (the default), you would get ‘bb’ as the output for the input ‘ab’. Whereas with <code class="highlighter-rouge">as_is</code> set to False, you would get ‘c’ as the output for the input ‘ab’.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span> 
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English to IPA</span> 
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng</span> 
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> 
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span>
    <span class="na">authors</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_to_ipa.json</span> 
    <span class="na">as_is</span><span class="pi">:</span> <span class="no">false</span>   <span class="c1"># &lt;------- Add this</span>
</code></pre></div></div>

<h5 id="case_sensitive-default-true"><code class="highlighter-rouge">case_sensitive</code> (default: True)</h5>

<p>The default is to treat your rules as case sensitive, but setting this to False, will make your rules case insensitive.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span> 
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English to IPA</span> 
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng</span> 
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> 
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span>
    <span class="na">authors</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_to_ipa.json</span> 
    <span class="na">case_sensitive</span><span class="pi">:</span> <span class="no">false</span>   <span class="c1"># &lt;------- Add this</span>
</code></pre></div></div>

<h5 id="escape_special-default-false"><code class="highlighter-rouge">escape_special</code> (default: False)</h5>

<p>As described in the section on <a href="#regular-expressions">regular expressions</a>, you can define rules using ‘special’ characters. By default, these characters are interpreted as ‘special’, but if you want all special characters in your mapping to be interpreted as their actual characters, you can set <code class="highlighter-rouge">escape_special</code> to true.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span> 
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English to IPA</span> 
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng</span> 
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> 
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span>
    <span class="na">authors</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_to_ipa.json</span> 
    <span class="na">escape_special</span><span class="pi">:</span> <span class="no">true</span>   <span class="c1"># &lt;------- Add this</span>
</code></pre></div></div>

<h5 id="norm_form-default-nfd"><code class="highlighter-rouge">norm_form</code> (default: “NFD”)</h5>

<p>If you’ve never heard of Unicode normalization don’t worry, you’re not alone! But, for writing rules and mappings using <code class="highlighter-rouge">g2p</code>, there can be some surprising ‘gotcha’ moments if you don’t choose the right normalization strategy.</p>

<p>The basic gist of the problem is that there can be multiple ways to write the <em>same</em> character in Unicode, depending on whether you use ‘combining characters’ to type or not. For example, on some keyboards, you might type ‘é’ by writing an e first and then another keystroke to type the acute accent that sits above it. The Unicode representation for this would likely be \u0065 (e) followed by \u0301 (a combining acute accent), however there is an entirely separate Unicode code point that has these two characters <em>pre-composed</em> (\u00e9).</p>

<p>Many fonts will render these two different representations identically and it can be really difficult and confounding as a user if both appear in the same text. Often times find/replace won’t work and frustrating things like that. Luckily, there is a standard for normalizing these differences so that all instances of sequences like \u0065\u0301 would be (NF)Composed into \u00e9, or the opposite direction where all instances of \u00e9 would be (NF)Decomposed into \u0065\u0301. For a more in-depth conversation on this, check out <a href="https://withblue.ink/2019/03/11/why-you-need-to-normalize-unicode-strings.html">this blog article</a>.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span> 
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English to IPA</span> 
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng</span> 
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> 
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span>
    <span class="na">authors</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_to_ipa.json</span> 
    <span class="na">norm_form</span><span class="pi">:</span> <span class="s2">"</span><span class="s">NFC"</span>   <span class="c1"># &lt;------- Add your Unicode normalization strategy here</span>
</code></pre></div></div>

<h5 id="out_delimiter-default-"><code class="highlighter-rouge">out_delimiter</code> (default: ‘’)</h5>

<p>Some mappings require that a delimiting character (or characters) be inserted in between when a rule applies. So, using the first example, maybe you want <code class="highlighter-rouge">kæt</code> to go to <code class="highlighter-rouge">kʰ|æ|t</code> instead of <code class="highlighter-rouge">kʰæt</code>. For this, you would set <code class="highlighter-rouge">out_delimiter: "|"</code> in your mapping.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span> 
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English to IPA</span> 
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng</span> 
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> 
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span>
    <span class="na">authors</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_to_ipa.json</span> 
    <span class="na">out_delimiter</span><span class="pi">:</span> <span class="s2">"</span><span class="s">|"</span>   <span class="c1"># &lt;------- Add your delimiter here</span>
</code></pre></div></div>

<h5 id="reverse-default-false"><code class="highlighter-rouge">reverse</code> (default: False)</h5>

<p>Setting this to reverse will try to reverse the mappings so that all characters defined as <code class="highlighter-rouge">out</code> in your mapping become the input characters and vice versa. Except for a few cases, this is unlikely to work very well for advanced mapings.</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span> 
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English to IPA</span> 
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng</span> 
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> 
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span>
    <span class="na">authors</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_to_ipa.json</span> 
    <span class="na">reverse</span><span class="pi">:</span> <span class="no">true</span>   <span class="c1"># &lt;------- Add this</span>
</code></pre></div></div>

<h5 id="prevent_feeding-default-false"><code class="highlighter-rouge">prevent_feeding</code> (default: False)</h5>

<p>Let’s say you have the following rules:</p>

<table>
  <thead>
    <tr>
      <th>in</th>
      <th>out</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>kw</td>
      <td>kʷ</td>
    </tr>
    <tr>
      <td>k</td>
      <td>kʲ</td>
    </tr>
  </tbody>
</table>

<p>Ordered in the way they are defined, an input of <code class="highlighter-rouge">kw</code> will produce <code class="highlighter-rouge">kʲʷ</code> and ordered the other way, an input of <code class="highlighter-rouge">kw</code> will produce <code class="highlighter-rouge">kʲw</code>. Neither of these are correct though! For this mapping, we want <code class="highlighter-rouge">kʷ</code> as the output. So, how do we solve this? There is a setting called <code class="highlighter-rouge">prevent_feeding</code> which, if set to true, will prevent the output of one rule from being processed by any subsequent rule. As described in <a href="#rule-ordering">rule order</a> this process when one rule provides the context for another rule to apply is called ‘feeding’ and so this setting will prevent that from happening. Note, setting <code class="highlighter-rouge">prevent_feeding: true</code> for your whole mapping will do this for every rule. If you just want to prevent feeding for one particular rule, you can write your rules in JSON and add the key to the specific rule you want to prevent feeding for.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kw"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kʷ"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"prevent_feeding"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="s2">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"k"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kʲ"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">mappings</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">language_name</span><span class="pi">:</span> <span class="s">English</span> 
    <span class="na">display_name</span><span class="pi">:</span> <span class="s">English to IPA</span> 
    <span class="na">in_lang</span><span class="pi">:</span> <span class="s">eng</span> 
    <span class="na">out_lang</span><span class="pi">:</span> <span class="s">eng-ipa</span> 
    <span class="na">type</span><span class="pi">:</span> <span class="s">mapping</span>
    <span class="na">authors</span><span class="pi">:</span>
      <span class="pi">-</span> <span class="s">Aidan Pine</span>
    <span class="na">mapping</span><span class="pi">:</span> <span class="s">eng_to_ipa.json</span> 
    <span class="na">prevent_feeding</span><span class="pi">:</span> <span class="no">true</span>   <span class="c1"># &lt;------- Add this</span>
</code></pre></div></div>

<h2 id="advanced-a-deeper-dive-into-writing-tricky-rules">Advanced: A deeper dive into writing tricky rules</h2>

<p>You may have noticed that the rules described above for converting words like ‘dog’ and ‘cat’ to IPA are woefully incomplete. The real world use cases for <code class="highlighter-rouge">g2p</code> often need to account for a lot more messiness than was described in the artificial example above. In fact, for languages like English, <code class="highlighter-rouge">g2p</code> is likely <strong>not</strong> a good solution. The English writing system is notoriously inconsistent, and there already exist a variety of other tools that account for all of the lexical (word-specific) idiosyncracies in deriving the IPA-form from the orthographic form. For many Indigenous languages, the writing system is sufficiently close to the spoken form that <code class="highlighter-rouge">g2p</code> is a very appropriate solution. In the following sections, I’ll describe some common problems when writing rules, and how to fix them.</p>

<h3 id="unicode-escape-sequences">Unicode Escape Sequences</h3>

<p>Sometimes you need rules to convert from characters that either don’t render very well, or render in a confusing way. In those cases, you can alternatively use <a href="https://www.rapidtables.com/code/text/unicode-characters.html">Unicode escape sequences</a>. For example, maybe you want to write a rule that converts the standard ASCII ‘g’ to the strict IPA Unicode /ɡ/. As you can likely see on your browser, these characters look very similar, but they’re not! The ASCII ‘g’ is U+0067 and the strict IPA ‘ɡ’ is U+0261. So, you can write a rule as follows:</p>

<table>
  <thead>
    <tr>
      <th>in</th>
      <th>out</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>\u0067</td>
      <td>\u0261</td>
    </tr>
  </tbody>
</table>

<p>or using <a href="https://www.json.org/json-en.html">JSON</a>:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
        </span><span class="s2">"in"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\u</span><span class="s2">0067"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"out"</span><span class="p">:</span><span class="w"> </span><span class="s2">"</span><span class="se">\u</span><span class="s2">0261"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>This is also helpful when you need to write rules between combining characters or other confusable characters. The <strong>rule of thumb</strong> is, if your rules are clearer using Unicode escape sequences, do it! Otherwise, just use the normal character in place.</p>

<h3 id="rule-ordering">Rule Ordering</h3>

<p>The order of your rules in <code class="highlighter-rouge">g2p</code> really matters! This is because some rules can either create or remove the context for other rules to apply. In linguistics, these rule ordering patterns are usually talked about as either <a href="https://linguistics.stackexchange.com/questions/6084/whats-the-difference-between-counterbleeding-bleeding-and-feeding">feeding, bleeding, counter-feeding, or counter-bleeding</a> relationships. There are potentially valid reasons to want to encode any of these types of relationships in your rules.</p>

<p>To illustrate a possible problem, let’s consider a <code class="highlighter-rouge">g2p</code> mapping for language that converts ‘a̱’ to ‘ə’ and ‘a’ to ‘æ’. ‘a̱’ is a sequence of a normal a followed by a combining macron below (\u0331). Because \u0331 (‘a̱’) is easily confusable with \u0332 (‘a̲’), in order to follow the rule of thumb for <a href="#unicode-escape-sequences">Unicode escape sequences</a>, I’ll write the rules as follows:</p>

<table>
  <thead>
    <tr>
      <th>in</th>
      <th>out</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>a</td>
      <td>æ</td>
    </tr>
    <tr>
      <td>a\u0331</td>
      <td>ə</td>
    </tr>
  </tbody>
</table>

<p>Now, assuming an input to this mapping of ‘a̱’ (a\u0331), we would get ‘æ̱’ (æ\u0331) instead of ‘ə’. Why is that? Because the first rule applies and turns ‘a’ into ‘æ’ before the second rule has a chance to apply. This is called a ‘bleeding’ relationship. In order to avoid it, we would need to write our rules as follows:</p>

<table>
  <thead>
    <tr>
      <th>in</th>
      <th>out</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>a\u0331</td>
      <td>ə</td>
    </tr>
    <tr>
      <td>a</td>
      <td>æ</td>
    </tr>
  </tbody>
</table>

<p>With this ordering, our input of ‘a̱’ (a\u0331) would turn into ‘ə’ as we expect, and our input of ‘a’ would turn into æ also as expected. Try it out on the <a href="https://g2p-studio.herokuapp.com">G2P Studio</a> if you don’t believe me!</p>

<h3 id="defining-sets-of-characters">Defining sets of characters</h3>

<p>Some rules are written with repeating sets of characters that can be tedious to write out. For this, we might want to define certain sets of characters using a <em>variable</em> name. These can be written using special types of mapping files in <code class="highlighter-rouge">g2p</code>.</p>

<p>For example, consider a series of rules which contextually apply only between vowels. Let’s say as an example of one of those rules, that <code class="highlighter-rouge">dd</code> turns to <code class="highlighter-rouge">ð</code> when it exists between two vowels. This language has the following vowels in its inventory: <code class="highlighter-rouge">a,e,i,o,u,æ,å,ø</code>. You could write the rules like this<sup id="fnref:5"><a href="#fn:5" class="footnote">5</a></sup>:</p>

<table>
  <thead>
    <tr>
      <th>in</th>
      <th>out</th>
      <th>context_before</th>
      <th>context_after</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>dd</td>
      <td>ð</td>
      <td>(a|e|i|o|u|æ|å|ø)</td>
      <td>(a|e|i|o|u|æ|å|ø)</td>
    </tr>
  </tbody>
</table>

<p>But, if there are lots of rules with these vowels, this could get very tedious, not to mention annoying if the characters in the set change at some point. It is also less readable, and leaves the reader of the mapping to infer the meaning of the rule.</p>

<p>So, in a separate file, by convention it is usually called <code class="highlighter-rouge">abbreviations.csv</code>, you can define a list of sets where each row is a new set. The first column contains the name of the set (by convention this is capitalized), and you can add characters to every following column. So, for example:</p>

<table>
  <thead>
    <tr>
      <th>variable name</th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>VOWEL</td>
      <td>a</td>
      <td>e</td>
      <td>i</td>
      <td>o</td>
      <td>u</td>
      <td>æ</td>
      <td>å</td>
      <td>ø</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>CONSONANT</td>
      <td>p</td>
      <td>b</td>
      <td>t</td>
      <td>d</td>
      <td>k</td>
      <td>g</td>
      <td>f</td>
      <td>s</td>
      <td>h</td>
      <td>v</td>
      <td>j</td>
      <td>r</td>
      <td>l</td>
      <td>m</td>
      <td>n</td>
    </tr>
    <tr>
      <td>FRONT</td>
      <td>i</td>
      <td>e</td>
      <td>œ</td>
      <td>ø</td>
      <td>y</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>BACK</td>
      <td>u</td>
      <td>o</td>
      <td>a</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>Then, in your configuration, you can add the file to a specific mapping using <code class="highlighter-rouge">abbreviations: abbreviations.csv</code>. After adding it to your mapping, you can write the above rule like this instead:</p>

<table>
  <thead>
    <tr>
      <th>in</th>
      <th>out</th>
      <th>context_before</th>
      <th>context_after</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>dd</td>
      <td>ð</td>
      <td>VOWEL</td>
      <td>VOWEL</td>
    </tr>
  </tbody>
</table>

<p>You can also use abbreviations like this in the G2P studio by writing them in the section at the bottom of the page titled ‘Custom Abbreviations’ They will be automatically applied to your custom rules above.</p>

<p><img src="/assets/images/g/g2p-abbs-800-7cd2be.png" srcset="/assets/images/g/g2p-abbs-400-7cd2be.png 400w, /assets/images/g/g2p-abbs-600-7cd2be.png 600w, /assets/images/g/g2p-abbs-800-7cd2be.png 800w, /assets/images/g/g2p-abbs-968-7cd2be.png 968w" /></p>

<h3 id="regular-expressions">Regular Expressions</h3>

<p><a href="https://en.wikipedia.org/wiki/Regular_expression">Regular expressions</a> are used ubiquitously in programming to do define certain search patterns in text. In fact, this is how <code class="highlighter-rouge">g2p</code> rules work! They eventually get compiled into a regular expression too. For the most part, you can add basic regular expressions to your rules</p>

<h3 id="using-specific-indices">Using specific indices</h3>

<p>…more to come…</p>

<h2 id="applications">Applications</h2>

<p>There are number of different software tools that are already making use of <code class="highlighter-rouge">g2p</code>. For general purpose use in Python, have a look at <a href="#advanced-use-in-python">this section</a>. G2P is also used extensively in the <a href="#readalongs">ReadAlongs</a> project for creating interactive audio/text documents and in <a href="#convertextract">Convertextract</a>, a tool for going <code class="highlighter-rouge">g2p</code> transformations in Microsoft Office documents while preserving the original document formatting.</p>

<h3 id="readalongs">ReadAlongs</h3>

<p>…more to come…</p>

<h3 id="convertextract">Convertextract</h3>
<p><a href="https://blog.mothertongues.org/convertextract-app">Convertextract</a></p>

<h3 id="advanced-use-in-python">Advanced: use in Python</h3>

<p>…more to come…</p>

<h2 id="advanced-contributing-your-rules-to-the-main-g2p-library">Advanced: contributing your rules to the main <code class="highlighter-rouge">g2p</code> library</h2>

<p>You’ve written some cool rules and you want to contribute, that’s awesome!</p>

<p>…more to come…</p>

<h2 id="advanced-adding-a-pre-processing-mapping">Advanced: adding a ‘pre-processing’ mapping</h2>

<p>…more to come…</p>

<h3 id="footnotes">Footnotes</h3>

<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Because the word ‘letter’ usually refers to a character within a specific alphabet or writing system, instead of ‘letter’, I’m going to use the word ‘character’ throughout this post. <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p>A Python ‘library’ is a collection of code <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:3">
      <p>Orthographic characters are circumfixed with apostrophes like ‘a’, broad IPA typically uses forward slashes like /k/ and narrow IPA typically uses square brackets like [kʰ] <a href="#fnref:3" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:4">
      <p>I’m using the free, hobby plan at <a href="https://www.heroku.com/">https://www.heroku.com/</a> to host it though, so occasionally the server goes to sleep. If you first go to the site and it takes a few seconds to boot up, don’t worry! <a href="#fnref:4" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:5">
      <p>You’ll notice that the syntax here is a little weird, what the heck are all of those pipes (the up-down things like |) doing there? That’s because I’m using <a href="https://en.wikipedia.org/wiki/Regular_expression">regular expressions</a> to express a <strong>OR</strong> e <strong>OR</strong> u etc… For more info, check out the <a href="#regular-expressions">section on regular expressions</a> <a href="#fnref:5" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

            </div>

            <!-- Rating -->
            

            <!-- Post Date -->
            <p>
                <small>
                    <span class="post-date"><time class="post-date"
                            datetime="2020-08-07">07 Aug 2020</time></span>
                    
                </small>
            </p>

            <!-- Claps -->
            <div class="mb-4 d-flex align-items-center" style='margin-top: 40px;'>
                <applause-button style="width: 58px; height: 58px;" />
            </div>
            <!-- End Claps -->

            <!-- Post Categories -->
            <div class="after-post-cats">
                <ul class="tags mb-4">
                    
                    
                </ul>
            </div>
            <!-- End Categories -->

            <!-- Post Tags -->
            <div class="after-post-tags">
                <ul class="tags">
                    
                    
                    <li>
                        <a data-proofer-ignore class="smoothscroll"
                            href="/tags#explanation">#explanation</a>
                    </li>
                    
                    <li>
                        <a data-proofer-ignore class="smoothscroll"
                            href="/tags#tech-showcase">#tech-showcase</a>
                    </li>
                    
                    <li>
                        <a data-proofer-ignore class="smoothscroll"
                            href="/tags#tutorial">#tutorial</a>
                    </li>
                    
                </ul>
            </div>
            <!-- End Tags -->

            <!-- Prev/Next -->
            <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                
                <a class="prev d-block col-md-6" href="https://blog.mothertongues.org/post-template/"> &laquo;
                    Standard post template</a>
                
                
                <a class="next d-block col-md-6 text-lg-right"
                    href="https://blog.mothertongues.org/why-a-new-cree-syllabics-converter/">Why I made yet another Cree syllabics converter &raquo; </a>
                
                <div class="clearfix"></div>
            </div>
            <!-- End Categories -->

        </div>
        <!-- End Post -->

    </div>
</div>
<!-- End Article
================================================== -->

<!-- Begin Comments
================================================== -->

<div class="container">
    <div id="comments" class="row justify-content-center mb-5">
        <div class="col-md-8">
            <section class="disqus">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'mothertongues'; 
        var disqus_developer = 0;
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = window.location.protocol + '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>

        </div>
    </div>
</div>

<!--End Comments
================================================== -->

<!-- Review with LD-JSON, adapt it for your needs if you like, but make sure you test the generated HTML source code first: 
https://search.google.com/structured-data/testing-tool/u/0/
================================================== -->

            </div>

            
            <!-- Bottom Alert Bar
================================================== -->
            <div class="alertbar">
                <div class="container text-center">
                    <span><img src="/assets/images/logo_no_text.png" alt="Mother Tongues Blog"> &nbsp; Never miss a
                        <b>story</b> from us, subscribe to our newsletter</span>
                    <form action="https://mailchi.mp/b87b1fbde236/mothertongues" method="post" name="mc-embedded-subscribe-form"
                        class="wj-contact-form validate" target="_blank" novalidate>
                        <div class="mc-field-group">
                            <input type="email" placeholder="Email" name="EMAIL" class="required email" id="mce-EMAIL"
                                autocomplete="on" required>
                            <input type="submit" value="Subscribe" name="subscribe" class="heart">
                        </div>
                    </form>
                </div>
            </div>
            

        </div>

        <!-- Categories Jumbotron
================================================== -->
        <div class="jumbotron fortags">
            <div class="d-md-flex h-100">
                <div class="col-md-4 transpdark align-self-center text-center h-100">
                    <div class="d-md-flex align-items-center justify-content-center h-100">
                        <h2 class="d-md-block align-self-center py-1 font-weight-light">Explore <span
                                class="d-none d-md-inline">→</span></h2>
                    </div>
                </div>
                <div class="col-md-8 p-5 align-self-center text-center">
                    
                    
                    
                    <a data-proofer-ignore class="mt-1 mb-1"
                        href="/categories#tutorial">Tutorial
                        (5)</a>
                    
                    <a data-proofer-ignore class="mt-1 mb-1"
                        href="/categories#blog">Blog
                        (5)</a>
                    
                    
                    
                </div>
            </div>
        </div>

        <!-- Begin Footer
================================================== -->
        <footer class="footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-6 col-sm-6 text-center text-lg-left">
                        Copyright © 2020 Mother Tongues
                    </div>
                </div>
            </div>
        </footer>
        <!-- End Footer
================================================== -->

    </div> <!-- /.site-content -->

    <!-- Scripts
================================================== -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>

    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>

    <script src="/assets/js/mediumish.js"></script>

    

    <script src="/assets/js/ie10-viewport-bug-workaround.js"></script>

    
    <script id="dsq-count-scr" src="//mothertongues.disqus.com/count.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/anchor-js/anchor.min.js"></script>
    <script>
       anchors.add();
    </script>
    

</body>

</html>
